# 游戏中地形大气和云的渲染

## 地形的几何

主要是讲述了地形的构成，以及与天空球、植被共同组成游戏环境。

展示了一些经典游戏作品的优秀地形美图。

分形思想；灰度高度图；等高线


T-Junctions，方块管理取代杂乱的三角形面片，使用四叉树，方便资源管理。

Quad Grids 解决T-Junctions 问题采用的方法是类似退化三角形的思想，没有对应连接点的顶点自动吸附到已经连接上的顶点上，此时三角形两条边重合，面积为0。

Deformable：类似弹簧的思想，用一张RT动态改变地形。

## 地形的材质
材质混合：

一、最简单的方法是按照alpha值混合在一起。
二、引入高度值，通过比较高度值决定如何混合。

核心思想：预先烘焙好混合的材质，根据view范围以及LOD确定需要使用哪一小部分资源，把这部分资源先调用到速度更快的cache缓存中，其他暂时用不上的资源依然放在原始位置。


## 植被道路贴花等

Tree Rendering：距离不同会使用不同的方法，例如近处是mesh，远处用插片表达（并且越远越稀疏）

## 大气散射理论

优点是计算简单，缺点是不够自然灵活，不能动态展示气候变化。

## 实时大气渲染

主要考虑两个值：一个是地表上某一海拔高度的点垂直方向与视线方向的夹角，另一个是高度。可以通过高度与角度（二维数据）计算通透度。

Precomputed Atmospheric Scattering（PAS）的问题：

1.计算量消耗大；

2.管理和动态切换天气，有时不同天气效果的切换需要进行大量插值运算。

3.采样一个四维的LUT对于实时渲染来说，开销依然很大。

优点：

1.不是完全基于物理，但符合迪士尼材质相同的原则，可以通过调节几个参数得到各种效果；

2.方便艺术家创作，例如可以得到许多非现实的场景（举例：两个太阳的天空，气候的变化）；

3.硬件友好，省去大量复杂的运算和存储。

## 云的渲染

云的类型：层云、积云、卷云。
